<h1 id="web-scraping-and-crawling-tool">Web Scraping and Crawling Tool</h1>

<p>A <strong>Python-based web scraping and crawling tool</strong> with a <strong>graphical user interface (GUI)</strong> built using <code class="language-plaintext highlighter-rouge">tkinter</code>. This tool allows users to crawl websites, download pages, and save them locally while maintaining the directory structure. Itâ€™s designed for ease of use, with features like depth control, rate limiting, and real-time logging.</p>

<hr />

<h2 id="features">Features</h2>

<ul>
  <li><strong>Intuitive GUI</strong>: Built with <code class="language-plaintext highlighter-rouge">tkinter</code> for a user-friendly experience.</li>
  <li><strong>Depth Control</strong>: Set the maximum depth for crawling to control how far the crawler goes.</li>
  <li><strong>Local Saving</strong>: Downloads and saves web pages locally, rewriting links for offline use.</li>
  <li><strong>Rate Limiting</strong>: Configurable delay between requests to avoid overwhelming servers.</li>
  <li><strong>Stop Functionality</strong>: Stop the crawling process at any time with a single click.</li>
  <li><strong>Real-Time Logging</strong>: Monitor the crawling process with live updates in the GUI.</li>
</ul>

<hr />

<h2 id="how-it-works">How It Works</h2>

<h3 id="crawling-algorithm">Crawling Algorithm</h3>
<p>The crawler uses a <strong>breadth-first search (BFS) algorithm</strong> with depth control:</p>
<ol>
  <li>Starts with the base URL at depth 0.</li>
  <li>Processes pages in FIFO order.</li>
  <li>Discovers new links up to the specified maximum depth.</li>
  <li>Maintains a set of visited URLs to avoid duplicates.</li>
</ol>

<h3 id="url-validation">URL Validation</h3>
<p>The tool includes special handling for Wikipedia and other sites:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_valid_url</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
    <span class="c1"># Skip images and non-HTML files
</span>    <span class="c1"># Special rules for Wikipedia URLs
</span>    <span class="c1"># Standard validation for other domains
</span></code></pre></div></div>

<h3 id="link-rewriting">Link Rewriting</h3>
<p>Localizes links using relative paths for offline use:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">local_path</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">clean_filename</span><span class="p">(</span><span class="n">absolute_url</span><span class="p">)</span>
<span class="n">relative_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">relpath</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
<span class="n">anchor</span><span class="p">[</span><span class="sh">'</span><span class="s">href</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">relative_path</span>
</code></pre></div></div>

<h3 id="threading-for-responsive-gui">Threading for Responsive GUI</h3>
<p>The crawling process runs in a separate thread to keep the GUI responsive:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">threading</span><span class="p">.</span><span class="nc">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">crawl_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="nf">start</span><span class="p">()</span>
</code></pre></div></div>

<hr />

<h2 id="full-code">Full Code</h2>

<p>Github Repository:  <a href="https://github.com/Diogo-Lages/WebScraper.py">Web Scraper Tool</a></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">tkinter</span> <span class="k">as</span> <span class="n">tk</span>
<span class="kn">from</span> <span class="n">tkinter</span> <span class="kn">import</span> <span class="n">ttk</span><span class="p">,</span> <span class="n">filedialog</span><span class="p">,</span> <span class="n">messagebox</span>
<span class="kn">import</span> <span class="n">threading</span>
<span class="kn">import</span> <span class="n">sys</span>
<span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">requests</span>
<span class="kn">from</span> <span class="n">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">from</span> <span class="n">urllib.parse</span> <span class="kn">import</span> <span class="n">urljoin</span><span class="p">,</span> <span class="n">urlparse</span>
<span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="n">re</span>


<span class="k">class</span> <span class="nc">WebsiteCrawler</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">base_url</span><span class="p">,</span> <span class="n">output_dir</span><span class="o">=</span><span class="sh">"</span><span class="s">downloaded_site</span><span class="sh">"</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="n">base_url</span>
        <span class="n">self</span><span class="p">.</span><span class="n">domain</span> <span class="o">=</span> <span class="nf">urlparse</span><span class="p">(</span><span class="n">base_url</span><span class="p">).</span><span class="n">netloc</span>
        <span class="n">self</span><span class="p">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="n">output_dir</span>
        <span class="n">self</span><span class="p">.</span><span class="n">visited_urls</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">rate_limit</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># Delay between requests in seconds
</span>        <span class="n">self</span><span class="p">.</span><span class="n">max_depth</span> <span class="o">=</span> <span class="n">max_depth</span>
        <span class="n">self</span><span class="p">.</span><span class="n">stop_requested</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Flag to control crawling
</span>
        <span class="c1"># Create output directory if it doesn't exist
</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">exists</span><span class="p">(</span><span class="n">output_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="p">.</span><span class="nf">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Request the crawler to stop after current page</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">stop_requested</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">Stop requested. Finishing current page...</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_valid_url</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Check if URL belongs to the same domain and is a webpage.</span><span class="sh">"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="nf">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="c1"># Skip any image files
</span>            <span class="n">image_extensions</span> <span class="o">=</span> <span class="p">(</span><span class="sh">'</span><span class="s">.jpg</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.jpeg</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.png</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.gif</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.svg</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.webp</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.bmp</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.ico</span><span class="sh">'</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">url</span><span class="p">.</span><span class="nf">lower</span><span class="p">().</span><span class="nf">endswith</span><span class="p">(</span><span class="n">image_extensions</span><span class="p">):</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Skipping image file: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">False</span>

            <span class="c1"># Skip Wikipedia special pages and non-article pages
</span>            <span class="n">skip_patterns</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sh">'</span><span class="s">/wiki/Wikipedia:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/File:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/Help:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/Special:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/Talk:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/User:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/Template:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/Category:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">/wiki/Portal:</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">action=</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">oldid=</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">diff=</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">printable=</span><span class="sh">'</span><span class="p">,</span>
                <span class="sh">'</span><span class="s">mobileaction=</span><span class="sh">'</span>
            <span class="p">]</span>

            <span class="c1"># Check if this is a Wikipedia URL and if so, apply special rules
</span>            <span class="k">if</span> <span class="sh">'</span><span class="s">wikipedia.org</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">parsed</span><span class="p">.</span><span class="n">netloc</span><span class="p">:</span>
                <span class="c1"># Skip special pages but allow all regular article pages
</span>                <span class="k">if</span> <span class="nf">any</span><span class="p">(</span><span class="n">pattern</span> <span class="ow">in</span> <span class="n">url</span> <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">skip_patterns</span><span class="p">):</span>
                    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Skipping Wikipedia special page: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
                    <span class="k">return</span> <span class="bp">False</span>

                <span class="c1"># Make sure it's a wiki article page
</span>                <span class="k">if</span> <span class="ow">not</span> <span class="sh">'</span><span class="s">/wiki/</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">url</span><span class="p">:</span>
                    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Skipping non-article page: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
                    <span class="k">return</span> <span class="bp">False</span>

                <span class="c1"># Allow all regular Wikipedia articles
</span>                <span class="k">if</span> <span class="sh">'</span><span class="s">/wiki/</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">url</span> <span class="ow">and</span> <span class="n">parsed</span><span class="p">.</span><span class="n">netloc</span> <span class="o">==</span> <span class="n">self</span><span class="p">.</span><span class="n">domain</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">True</span>

            <span class="c1"># For non-Wikipedia sites, use standard validation
</span>            <span class="n">is_valid</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">parsed</span><span class="p">.</span><span class="n">netloc</span> <span class="o">==</span> <span class="n">self</span><span class="p">.</span><span class="n">domain</span> <span class="ow">and</span>
                    <span class="n">parsed</span><span class="p">.</span><span class="n">scheme</span> <span class="ow">in</span> <span class="p">[</span><span class="sh">'</span><span class="s">http</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">https</span><span class="sh">'</span><span class="p">]</span> <span class="ow">and</span>
                    <span class="ow">not</span> <span class="n">url</span><span class="p">.</span><span class="nf">endswith</span><span class="p">((</span><span class="sh">'</span><span class="s">.pdf</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.zip</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.doc</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">.docx</span><span class="sh">'</span><span class="p">))</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">URL rejected: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">is_valid</span>

        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error parsing URL </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">clean_filename</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Convert URL to a valid filename.</span><span class="sh">"""</span>
        <span class="c1"># Remove the domain and scheme
</span>        <span class="n">filename</span> <span class="o">=</span> <span class="nf">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="n">path</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span> <span class="ow">or</span> <span class="n">filename</span><span class="p">.</span><span class="nf">endswith</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">):</span>
            <span class="n">filename</span> <span class="o">+=</span> <span class="sh">'</span><span class="s">index.html</span><span class="sh">'</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">.</span><span class="nf">endswith</span><span class="p">(</span><span class="sh">'</span><span class="s">.html</span><span class="sh">'</span><span class="p">):</span>
            <span class="n">filename</span> <span class="o">+=</span> <span class="sh">'</span><span class="s">.html</span><span class="sh">'</span>

        <span class="c1"># Clean the filename
</span>        <span class="n">filename</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">[&lt;&gt;:</span><span class="sh">"</span><span class="s">/\\|?*]</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">_</span><span class="sh">'</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">filename</span><span class="p">.</span><span class="nf">lstrip</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">download_page</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Download a webpage and return its content.</span><span class="sh">"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
                <span class="sh">'</span><span class="s">User-Agent</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36</span><span class="sh">'</span>
            <span class="p">}</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">Attempting to download: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
            <span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Download successful! Status code: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Content length: </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span><span class="si">}</span><span class="s"> characters</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span><span class="p">.</span><span class="n">text</span>
        <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error downloading </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">save_page</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Save webpage content to a file and rewrite links to point to local files.</span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">content</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">clean_filename</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">Saving page to: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Parse the HTML
</span>                <span class="n">soup</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="sh">'</span><span class="s">html.parser</span><span class="sh">'</span><span class="p">)</span>

                <span class="c1"># Remove all image elements
</span>                <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">.</span><span class="nf">find_all</span><span class="p">(</span><span class="sh">'</span><span class="s">img</span><span class="sh">'</span><span class="p">):</span>
                    <span class="n">img</span><span class="p">.</span><span class="nf">decompose</span><span class="p">()</span>

                <span class="c1"># Remove all picture elements
</span>                <span class="k">for</span> <span class="n">picture</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">.</span><span class="nf">find_all</span><span class="p">(</span><span class="sh">'</span><span class="s">picture</span><span class="sh">'</span><span class="p">):</span>
                    <span class="n">picture</span><span class="p">.</span><span class="nf">decompose</span><span class="p">()</span>

                <span class="c1"># Remove image-related elements like figure/figcaption if they're empty after image removal
</span>                <span class="k">for</span> <span class="n">figure</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">.</span><span class="nf">find_all</span><span class="p">(</span><span class="sh">'</span><span class="s">figure</span><span class="sh">'</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">figure</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
                        <span class="n">figure</span><span class="p">.</span><span class="nf">decompose</span><span class="p">()</span>

                <span class="c1"># Rewrite links to point to local files
</span>                <span class="k">for</span> <span class="n">anchor</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">.</span><span class="nf">find_all</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
                    <span class="n">href</span> <span class="o">=</span> <span class="n">anchor</span><span class="p">[</span><span class="sh">'</span><span class="s">href</span><span class="sh">'</span><span class="p">]</span>
                    <span class="n">absolute_url</span> <span class="o">=</span> <span class="nf">urljoin</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">href</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">absolute_url</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">visited_urls</span><span class="p">:</span>
                        <span class="c1"># Convert the absolute URL to a local path
</span>                        <span class="n">local_path</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">clean_filename</span><span class="p">(</span><span class="n">absolute_url</span><span class="p">)</span>
                        <span class="c1"># Make the path relative to the current file
</span>                        <span class="n">current_depth</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">).</span><span class="nf">split</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">sep</span><span class="p">))</span>
                        <span class="n">relative_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">relpath</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
                        <span class="n">anchor</span><span class="p">[</span><span class="sh">'</span><span class="s">href</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">relative_path</span>
                        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Rewriting link: </span><span class="si">{</span><span class="n">href</span><span class="si">}</span><span class="s"> -&gt; </span><span class="si">{</span><span class="n">relative_path</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

                <span class="c1"># Create subdirectories if needed
</span>                <span class="n">os</span><span class="p">.</span><span class="nf">makedirs</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">filepath</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Directory structure created/verified</span><span class="sh">"</span><span class="p">)</span>

                <span class="c1"># Save the modified HTML
</span>                <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">soup</span><span class="p">))</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Successfully saved modified HTML to </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

            <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error saving </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
                <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Full path attempted: </span><span class="si">{</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">abspath</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_links</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Extract all valid links from a webpage.</span><span class="sh">"""</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="sh">'</span><span class="s">html.parser</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">links</span> <span class="o">=</span> <span class="nf">set</span><span class="p">()</span>

        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">Extracting links from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">link_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">anchor</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">.</span><span class="nf">find_all</span><span class="p">(</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
            <span class="n">link</span> <span class="o">=</span> <span class="nf">urljoin</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">anchor</span><span class="p">[</span><span class="sh">'</span><span class="s">href</span><span class="sh">'</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="nf">is_valid_url</span><span class="p">(</span><span class="n">link</span><span class="p">):</span>
                <span class="n">links</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
                <span class="n">link_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Found </span><span class="si">{</span><span class="n">link_count</span><span class="si">}</span><span class="s"> valid links on this page</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">links</span>

    <span class="k">def</span> <span class="nf">crawl</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Start the crawling process.</span><span class="sh">"""</span>
        <span class="c1"># Reset stop flag
</span>        <span class="n">self</span><span class="p">.</span><span class="n">stop_requested</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># Queue now contains tuples of (url, depth)
</span>        <span class="n">queue</span> <span class="o">=</span> <span class="p">[(</span><span class="n">self</span><span class="p">.</span><span class="n">base_url</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="n">pages_processed</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>

        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">Starting crawl of </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">base_url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Maximum depth: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">max_depth</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">queue</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">self</span><span class="p">.</span><span class="n">stop_requested</span><span class="p">:</span>
            <span class="n">url</span><span class="p">,</span> <span class="n">depth</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">visited_urls</span> <span class="ow">or</span> <span class="n">depth</span> <span class="o">&gt;=</span> <span class="n">self</span><span class="p">.</span><span class="n">max_depth</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">pages_processed</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">--- Processing page </span><span class="si">{</span><span class="n">pages_processed</span><span class="si">}</span><span class="s"> ---</span><span class="sh">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">URL: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Depth: </span><span class="si">{</span><span class="n">depth</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">max_depth</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Queue size: </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

            <span class="n">self</span><span class="p">.</span><span class="n">visited_urls</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="c1"># Download the page
</span>            <span class="n">content</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">download_page</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">content</span><span class="p">:</span>
                <span class="c1"># Save the page
</span>                <span class="n">self</span><span class="p">.</span><span class="nf">save_page</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>

                <span class="c1"># Only add new links if we haven't reached max_depth
</span>                <span class="k">if</span> <span class="n">depth</span> <span class="o">&lt;</span> <span class="n">self</span><span class="p">.</span><span class="n">max_depth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># Extract and add new links to the queue with incremented depth
</span>                    <span class="n">new_links</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract_links</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
                    <span class="n">queue</span><span class="p">.</span><span class="nf">extend</span><span class="p">([(</span><span class="n">link</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">new_links</span> <span class="k">if</span> <span class="n">link</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">visited_urls</span><span class="p">])</span>

                <span class="c1"># Rate limiting
</span>                <span class="k">if</span> <span class="n">queue</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">self</span><span class="p">.</span><span class="n">stop_requested</span><span class="p">:</span>
                    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Waiting </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">rate_limit</span><span class="si">}</span><span class="s"> seconds before next page...</span><span class="sh">"</span><span class="p">)</span>
                    <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">rate_limit</span><span class="p">)</span>

        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="s">Crawling completed!</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">stop_requested</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Crawling was stopped by user</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Total pages processed: </span><span class="si">{</span><span class="n">pages_processed</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Total unique URLs visited: </span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">visited_urls</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Total time: </span><span class="si">{</span><span class="n">elapsed_time</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s"> seconds</span><span class="sh">"</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WebCrawlerGUI</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="n">self</span><span class="p">.</span><span class="n">root</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">"</span><span class="s">Web Crawler</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">root</span><span class="p">.</span><span class="nf">geometry</span><span class="p">(</span><span class="sh">"</span><span class="s">600x500</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">crawler</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c1"># Initialize crawler reference
</span>
        <span class="c1"># Create main frame
</span>        <span class="n">main_frame</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="sh">"</span><span class="s">10</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">main_frame</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">E</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">N</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">S</span><span class="p">))</span>

        <span class="c1"># URL input
</span>        <span class="n">ttk</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">URL to crawl:</span><span class="sh">"</span><span class="p">).</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">url_var</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nc">StringVar</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">url_entry</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Entry</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">url_var</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">url_entry</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">E</span><span class="p">),</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Output directory
</span>        <span class="n">ttk</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">Output directory:</span><span class="sh">"</span><span class="p">).</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">output_var</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nc">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="nf">getcwd</span><span class="p">(),</span> <span class="sh">"</span><span class="s">downloaded_site</span><span class="sh">"</span><span class="p">))</span>
        <span class="n">self</span><span class="p">.</span><span class="n">output_entry</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Entry</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">output_var</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">output_entry</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">E</span><span class="p">),</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">ttk</span><span class="p">.</span><span class="nc">Button</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">Browse</span><span class="sh">"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">browse_output</span><span class="p">).</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                                                               <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Depth input
</span>        <span class="n">ttk</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">Maximum depth:</span><span class="sh">"</span><span class="p">).</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">depth_var</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nc">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="sh">"</span><span class="s">3</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">depth_entry</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Entry</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">depth_var</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">depth_entry</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Progress frame
</span>        <span class="n">progress_frame</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">LabelFrame</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">Progress</span><span class="sh">"</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="sh">"</span><span class="s">5</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">progress_frame</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">E</span><span class="p">),</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Progress bar
</span>        <span class="n">self</span><span class="p">.</span><span class="n">progress_var</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nc">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="sh">"</span><span class="s">Ready</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">ttk</span><span class="p">.</span><span class="nc">Label</span><span class="p">(</span><span class="n">progress_frame</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">progress_var</span><span class="p">).</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">)</span>

        <span class="c1"># Log text area
</span>        <span class="n">self</span><span class="p">.</span><span class="n">log_text</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">wrap</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">WORD</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">log_text</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">E</span><span class="p">),</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Scrollbar for log
</span>        <span class="n">scrollbar</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Scrollbar</span><span class="p">(</span><span class="n">main_frame</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">VERTICAL</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">log_text</span><span class="p">.</span><span class="n">yview</span><span class="p">)</span>
        <span class="n">scrollbar</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">N</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">S</span><span class="p">))</span>
        <span class="n">self</span><span class="p">.</span><span class="n">log_text</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">yscrollcommand</span><span class="o">=</span><span class="n">scrollbar</span><span class="p">.</span><span class="nb">set</span><span class="p">)</span>

        <span class="c1"># Buttons frame
</span>        <span class="n">button_frame</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Frame</span><span class="p">(</span><span class="n">main_frame</span><span class="p">)</span>
        <span class="n">button_frame</span><span class="p">.</span><span class="nf">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Start button
</span>        <span class="n">self</span><span class="p">.</span><span class="n">start_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Button</span><span class="p">(</span><span class="n">button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">Start Crawling</span><span class="sh">"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">start_crawling</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">start_button</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Stop button (initially disabled)
</span>        <span class="n">self</span><span class="p">.</span><span class="n">stop_button</span> <span class="o">=</span> <span class="n">ttk</span><span class="p">.</span><span class="nc">Button</span><span class="p">(</span><span class="n">button_frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sh">"</span><span class="s">Stop</span><span class="sh">"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">stop_crawling</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">disabled</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">stop_button</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="p">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Configure grid weights
</span>        <span class="n">main_frame</span><span class="p">.</span><span class="nf">columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Redirect stdout to our log
</span>        <span class="n">sys</span><span class="p">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">self</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Handle stdout redirection</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">log_text</span><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">END</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">log_text</span><span class="p">.</span><span class="nf">see</span><span class="p">(</span><span class="n">tk</span><span class="p">.</span><span class="n">END</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">root</span><span class="p">.</span><span class="nf">update_idletasks</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">flush</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Required for stdout redirection</span><span class="sh">"""</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">browse_output</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Open directory browser</span><span class="sh">"""</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">filedialog</span><span class="p">.</span><span class="nf">askdirectory</span><span class="p">(</span><span class="n">initialdir</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">output_var</span><span class="p">.</span><span class="nf">get</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">output_var</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop_crawling</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Stop the crawling process</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">stop_button</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">disabled</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">progress_var</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="sh">"</span><span class="s">Stopping...</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">crawler</span><span class="p">.</span><span class="nf">stop</span><span class="p">()</span>  <span class="c1"># Request the crawler to stop
</span>
    <span class="k">def</span> <span class="nf">start_crawling</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Start the crawling process</span><span class="sh">"""</span>
        <span class="c1"># Validate inputs
</span>        <span class="n">url</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">url_var</span><span class="p">.</span><span class="nf">get</span><span class="p">().</span><span class="nf">strip</span><span class="p">()</span>
        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">output_var</span><span class="p">.</span><span class="nf">get</span><span class="p">().</span><span class="nf">strip</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">depth</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">depth_var</span><span class="p">.</span><span class="nf">get</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">depth</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">Depth must be at least 1</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="p">.</span><span class="nf">showerror</span><span class="p">(</span><span class="sh">"</span><span class="s">Error</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Invalid depth value. Please enter a positive number.</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="p">:</span>
            <span class="n">messagebox</span><span class="p">.</span><span class="nf">showerror</span><span class="p">(</span><span class="sh">"</span><span class="s">Error</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Please enter a URL</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="p">.</span><span class="nf">startswith</span><span class="p">((</span><span class="sh">'</span><span class="s">http://</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">https://</span><span class="sh">'</span><span class="p">)):</span>
            <span class="n">messagebox</span><span class="p">.</span><span class="nf">showerror</span><span class="p">(</span><span class="sh">"</span><span class="s">Error</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">URL must start with http:// or https://</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Disable inputs while crawling
</span>        <span class="n">self</span><span class="p">.</span><span class="n">start_button</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">disabled</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">url_entry</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">disabled</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">output_entry</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">disabled</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">progress_var</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="sh">"</span><span class="s">Crawling...</span><span class="sh">"</span><span class="p">)</span>

        <span class="c1"># Clear log
</span>        <span class="n">self</span><span class="p">.</span><span class="n">log_text</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tk</span><span class="p">.</span><span class="n">END</span><span class="p">)</span>

        <span class="c1"># Start crawling in a separate thread
</span>        <span class="k">def</span> <span class="nf">crawl_thread</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">crawler</span> <span class="o">=</span> <span class="nc">WebsiteCrawler</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">,</span> <span class="n">depth</span><span class="p">)</span>
                <span class="n">self</span><span class="p">.</span><span class="n">stop_button</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">normal</span><span class="sh">'</span><span class="p">)</span>  <span class="c1"># Enable stop button
</span>                <span class="n">self</span><span class="p">.</span><span class="n">crawler</span><span class="p">.</span><span class="nf">crawl</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">crawler</span><span class="p">.</span><span class="n">stop_requested</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">root</span><span class="p">.</span><span class="nf">after</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">crawling_finished</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="sh">"</span><span class="s">Crawling stopped by user</span><span class="sh">"</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">self</span><span class="p">.</span><span class="n">root</span><span class="p">.</span><span class="nf">after</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">crawling_finished</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">root</span><span class="p">.</span><span class="nf">after</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">crawling_finished</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="nf">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">threading</span><span class="p">.</span><span class="nc">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">crawl_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="bp">True</span><span class="p">).</span><span class="nf">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">crawling_finished</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="n">error_message</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Called when crawling is complete</span><span class="sh">"""</span>
        <span class="c1"># Re-enable inputs
</span>        <span class="n">self</span><span class="p">.</span><span class="n">start_button</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">normal</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">url_entry</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">normal</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">output_entry</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">normal</span><span class="sh">'</span><span class="p">)</span>

        <span class="c1"># Disable stop button
</span>        <span class="n">self</span><span class="p">.</span><span class="n">stop_button</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="sh">'</span><span class="s">disabled</span><span class="sh">'</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">error_message</span> <span class="ow">and</span> <span class="sh">"</span><span class="s">stopped by user</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">error_message</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">progress_var</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="sh">"</span><span class="s">Crawling stopped</span><span class="sh">"</span><span class="p">)</span>
                <span class="n">messagebox</span><span class="p">.</span><span class="nf">showinfo</span><span class="p">(</span><span class="sh">"</span><span class="s">Stopped</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Website crawling was stopped by user</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">self</span><span class="p">.</span><span class="n">progress_var</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="sh">"</span><span class="s">Crawling completed!</span><span class="sh">"</span><span class="p">)</span>
                <span class="n">messagebox</span><span class="p">.</span><span class="nf">showinfo</span><span class="p">(</span><span class="sh">"</span><span class="s">Success</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Website crawling completed successfully!</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">progress_var</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="sh">"</span><span class="s">Error occurred!</span><span class="sh">"</span><span class="p">)</span>
            <span class="n">messagebox</span><span class="p">.</span><span class="nf">showerror</span><span class="p">(</span><span class="sh">"</span><span class="s">Error</span><span class="sh">"</span><span class="p">,</span> <span class="sa">f</span><span class="sh">"</span><span class="s">An error occurred while crawling:</span><span class="se">\n</span><span class="si">{</span><span class="n">error_message</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="p">.</span><span class="nc">Tk</span><span class="p">()</span>
    <span class="n">app</span> <span class="o">=</span> <span class="nc">WebCrawlerGUI</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">root</span><span class="p">.</span><span class="nf">mainloop</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">()</span>
</code></pre></div></div>

<hr />

<h2 id="code-structure">Code Structure</h2>

<h3 id="key-components">Key Components</h3>
<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">WebsiteCrawler</code> Class</strong>: Handles the core crawling logic, including URL validation, content downloading, and link extraction.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">WebCrawlerGUI</code> Class</strong>: Manages the GUI components and threading for a responsive interface.</li>
  <li><strong>Main Function</strong>: Initializes the GUI and starts the application.</li>
</ol>

<h3 id="method-overview">Method Overview</h3>
<pre><code class="language-mermaid">graph TD
    A[Start Crawling] --&gt; B{Validate Inputs}
    B --&gt;|Valid| C[Initialize Crawler]
    C --&gt; D[Crawl Base URL]
    D --&gt; E[Process Queue]
    E --&gt; F[Download Page]
    F --&gt; G[Save Content]
    G --&gt; H[Extract Links]
    H --&gt; I[Add to Queue]
    I --&gt; J{More Pages?}
    J --&gt;|Yes| E
    J --&gt;|No| K[Finish]
</code></pre>

<hr />

<h2 id="limitations">Limitations</h2>

<ol>
  <li><strong>JavaScript Content</strong>: Cannot render or scrape JavaScript-generated content.</li>
  <li><strong>Dynamic Websites</strong>: May miss content loaded asynchronously.</li>
  <li><strong>Authentication</strong>: Doesnâ€™t handle password-protected pages.</li>
  <li><strong>Robots.txt</strong>: Doesnâ€™t respect websiteâ€™s <code class="language-plaintext highlighter-rouge">robots.txt</code> policies.</li>
  <li><strong>Large Sites</strong>: Not optimized for very large websites (&gt;1000 pages).</li>
</ol>

<hr />

<h2 id="future-enhancements">Future Enhancements</h2>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add support for <code class="language-plaintext highlighter-rouge">sitemap.xml</code> parsing.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Implement concurrent requests with thread pooling.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add CSS/JavaScript file downloading.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Create sitemap visualization.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add proxy support for distributed crawling.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Respect <code class="language-plaintext highlighter-rouge">robots.txt</code> rules.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add support for handling cookies and sessions.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Implement a retry mechanism for failed requests.</li>
</ul>

<hr />

<h2 id="ethical-considerations">Ethical Considerations</h2>

<ul>
  <li>Always check the websiteâ€™s <strong>Terms of Service</strong> before scraping.</li>
  <li>Add <code class="language-plaintext highlighter-rouge">robots.txt</code> checking (currently not implemented).</li>
  <li>Implement rate limiting to avoid server overload.</li>
  <li>Consider adding <code class="language-plaintext highlighter-rouge">Referrer-Policy</code> and <code class="language-plaintext highlighter-rouge">User-Agent</code> headers.</li>
  <li>Never scrape personal or sensitive information.</li>
  <li>Use the tool responsibly and for educational purposes only.</li>
</ul>

<hr />

